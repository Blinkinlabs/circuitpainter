

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Usage &mdash; Circuit Painter  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Additional Notes" href="notes.html" />
    <link rel="prev" title="Example Projects" href="examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Circuit Painter
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">What is Circuit Painter?</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Core concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced topics</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extended-object-properties">Extended object properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="#board-configuration">Board configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-boards-adding-manual-edits">Updating boards / adding manual edits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="notes.html">Additional Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Function Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/blinkinlabs/circuitpainter">Source Code on Github</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/circuitpainter/">PyPi Project</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blinkinlabs.com">Blinkinlabs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Circuit Painter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Advanced Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/advanced_usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced-usage">
<h1>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Link to this heading"></a></h1>
<p>The goal of circuitpainter is to make the most common parts of PCB generation
easy, and you might want to do things that this API doesn’t directly support.</p>
<p>Note that the underlying pcbnew API is not finished, and will likely be
different between even minor KiCad versions. Using the python help() function
on these object references is a good way to explore their options, though it
gets complicated because they are themselves thin wrappers over the C-language
pcbnew library. Eventually, you’ll need to dig through the KiCad source
to figure out how things are supposed to work, and don’t forget to check the
bug tracker if things aren’t working correctly, because it probably is a bug
and there might be a workaround / fix.</p>
<section id="extended-object-properties">
<h2>Extended object properties<a class="headerlink" href="#extended-object-properties" title="Link to this heading"></a></h2>
<p>Circuit painter aims to keep circuit creation simple, but there are extra configuration
settings on many objects that you might want access to. To facilitate this, all
functions that create a PCB object will also return a reference to that object,
so that you can modify it.</p>
<p>For example, create a rectangular zone, and save the reference to it:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">CircuitPainter</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span><span class="s2">&quot;F_Cu&quot;</span><span class="p">)</span>
<span class="n">zone</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">rect_zone</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Then, modify the zone properties using the pcbnew api:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">zone</span><span class="o">.</span><span class="n">SetIsRuleArea</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">zone</span><span class="o">.</span><span class="n">SetDoNotAllowCopperPour</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">zone</span><span class="o">.</span><span class="n">SetDoNotAllowVias</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">zone</span><span class="o">.</span><span class="n">SetDoNotAllowTracks</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">zone</span><span class="o">.</span><span class="n">SetDoNotAllowPads</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="board-configuration">
<h2>Board configuration<a class="headerlink" href="#board-configuration" title="Link to this heading"></a></h2>
<p>Many of the board configuration options (stackup, DRC rules, etc) are
stored in the board design settings. For example, to create a 4-layer board
with some different DRC settings:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pcbnew</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">pcb</span><span class="o">.</span><span class="n">GetDesignSettings</span><span class="p">()</span>
<span class="n">settings</span><span class="o">.</span><span class="n">SetCopperLayerCount</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># Change to a 4-layer board design</span>
<span class="n">settings</span><span class="o">.</span><span class="n">m_CopperEdgeClearance</span> <span class="o">=</span> <span class="n">pcbnew</span><span class="o">.</span><span class="n">FromMM</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># Set the copper-to-edge spacing to 0.1mm</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that we are importing ‘pcbnew’ here, in order to use the FromMM() function
to convert a measurement from mm to KiCad’s internal units.</p>
</section>
<section id="updating-boards-adding-manual-edits">
<h2>Updating boards / adding manual edits<a class="headerlink" href="#updating-boards-adding-manual-edits" title="Link to this heading"></a></h2>
<p>Circuit Painter is great for automating parts of designs that are highly repetitive,
but is less effective for more mundane tasks such as wiring up a fancy LED array to
a microcontroller. On this end, everything that CircuitPainter creates is placed into
a single group. When you make manual additions to the board, be sure not to put your
changes into the auto-generated group. Later, if you want to re-generate the automated
portion of your design, you should be able to just delete that group, then start
Circuit Painter by passing it the file name:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">CircuitPainter</span><span class="p">(</span><span class="s1">&#39;my_file.kicad_pcb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>New objects will then be added to that board, in a new group.</p>
<table class="autosummary longtable docutils align-default">
<tbody>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples.html" class="btn btn-neutral float-left" title="Example Projects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="notes.html" class="btn btn-neutral float-right" title="Additional Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 Blinkinlabs.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>